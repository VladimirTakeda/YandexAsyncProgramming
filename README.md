# Домашнее задание по Async Programming

## Введение

Вы управляете отделом в логистической компании и отвечаете за обработку входящих
запросов на отправку посылок в различные города для клиентов. К вам регулярно
приносят стопки карточек, на которых есть предзаполненная информация по отправке.

Вручную обработка карточек занимает слишком много времени, поэтому вы решаете
автоматизировать данный процесс, чтобы повысить производительность предприятия.

## Задание

Нужно написать реализацию интерфейса `Department`. Данный интерфейс можно найти в
файле `pkg/core/department.go`. Сервис должен обрабатывать переданные в метод
`Handle(...)` карточки и возвращать операцию, которая отвечает за ход выполнения
этой обработки.

Каждая карточка при поступлении содержит неполную информацию: в ней отсутствует
цена и продолжительность доставки. Перед регистрацией данной карточки эту информацию
необходимо дозаполнить. Получить информацию можно будет в отдельном сервисе.

Реализация будет тестироваться на трех тест-кейсах.
Тесты проверяют скорость работы программы и корректный сбор статистики по карточкам.

Также будет осуществлена проверка качества кода утилитой `golangci-lint`.

Успешным считается задание, которое проходит все проверки за ограниченное время.

## Инструкции и детали

Чтобы начать задание, нужно склонировать проект к себе, после чего создать отдельную
ветку по шаблону `feature/<username>`, выполнив команду:

```bash
git checkout -b feature/<username>
```

После этого можно начать выполнять задание.

**Обратите внимание, что для исправной работы тестов, необходимо в функции `init()`
файла `pkg/core/department_impl.go` обязательно назначить переменной CurrentDepartment
рабочий экземпляр вашей реализации, заменив исходный `depNOOP`.**

Саму реализацию рекомендуется положить в файл `pkg/core/department_impl.go`, но
если захочется разбить реализацию на несколько файлов, то никто возражать не будет. :)

Для промежуточного тестирования, в файле `pkg/core/department_test.go` есть простенький
тест, который проверяет базовый функционил. Можно опираться на него и/или дописать свои
дополнительные тесты, если они смогут помочь на этапе разработки.

Чтобы выполнить тест, достаточно запустить команду:

```bash
go test --race ./...
```

Для проверки качества кода рекомендуется установить утилиту `golangci-lint` и выполнять
проверку кода командой:

```bash
golangci-lint run ./...
```

Сама карточка содержит следующую информацию:

* `id` — уникальный идентификатор карточки;
* `destination_id` — пункт назначения;
* `customer_id` — идентификатор клиента;
* `weight` — вес груза;
* `price` — цена доставки;
* `delivery_duration` — продолжительность доставки.

При получении карточки, цена доставки и продолжительность — пустые. Перед регистрацией
данной карточки необходимо эту информацию запросить, после чего заполнить карточку
полученными данными и зарегистрировать в системе.

Также необходимо собирать статистику по каждой стопке карточек, чтобы понимать о
состоянии загруженности и занятости транспортных средств.

Также для наблюдения за работой необходимо уметь возвращать статистику работы отдела:

* Сколько всего карточек было обработано на данный момент;
* Скорость обработки карточек в секунду.

Реализовывать самостоятельно интерфейс `DeliveryClient` не нужно.
